"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
/* eslint-disable
  strict,
  no-param-reassign
*/
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
const ajv_1 = __importDefault(require("ajv"));
const ajv_errors_1 = __importDefault(require("ajv-errors"));
const ajv_keywords_1 = __importDefault(require("ajv-keywords"));
const ValidationError_1 = __importDefault(require("./ValidationError"));
const ajv = new ajv_1.default({
    allErrors: true,
    jsonPointers: true,
});
ajv_errors_1.default(ajv);
ajv_keywords_1.default(ajv, ['instanceof', 'typeof']);
const validateOptions = (schema, options, name) => {
    if (typeof schema === 'string') {
        schema = fs_1.default.readFileSync(path_1.default.resolve(schema), 'utf8');
        schema = JSON.parse(schema);
    }
    if (!ajv.validate(schema, options)) {
        throw new ValidationError_1.default(ajv.errors || [], name);
    }
    return true;
};
module.exports = validateOptions;
